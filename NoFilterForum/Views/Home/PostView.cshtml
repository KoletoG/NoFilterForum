@using NoFilterForum.Models.ViewModels
@model PostViewModel
<a asp-action="Profile" asp-route-userName="@Model.Post.User.UserName">@Model.Post.User.UserName</a>
<h1>@Model.Post.Title</h1>
<h5>@Model.Post.Content</h5>
@if (Model.Post.User.UserName == this.User.Identity.Name)
{
	<form asp-action="DeletePost" asp-route-id="@Model.Post.Id" method="post">
		@Html.AntiForgeryToken()
		<button type="submit">Delete Post</button>
	</form>
}
@{
	<form asp-action="CreateReply" asp-controller="Home" asp-route-postid="@Model.Post.Id" method="post">
		@Html.AntiForgeryToken()
		<input type="text" name="content" placeholder="Write a reply..."/>
		<button type="submit">Create reply</button>
	</form>
	@foreach(var reply in Model.Replies)
	{
		<a asp-action="Profile" asp-route-userName="@reply.User.UserName">@reply.User.UserName</a>
		<h5>@reply.Content</h5>
		@if (reply.User.UserName == this.User.Identity.Name)
		{
			<form asp-action="DeleteReply" asp-route-id="@reply.Id" method="post">
			@Html.AntiForgeryToken()
				<button type="submit">Delete Reply</button>
			</form>
		}
	}
}