@using NoFilterForum.Global_variables
@using NoFilterForum.Models.ViewModels
@model ProfileViewModel
@{
	if (Model.IsSameUser)
	{
		<h1>Hello!</h1>
		<h6>You have: @Model.User.Warnings.Count warnings</h6>
		<h2>Your info (This information is only visible by you): </h2>
		<h3>Email: @Model.User.Email</h3>
		<h3>Your account was created on @Model.User.DateCreated.ToLongDateString()</h3>
		if (string.IsNullOrEmpty(Model.User.Bio))
		{
			<form asp-action="SetBio" asp-controller="Home" asp-route-userid="@Model.User.Id" method="post">
			@Html.AntiForgeryToken()
			<input name="bio" placeholder="Your bio..." type="text"/>
			<button type="submit">Save Bio</button>
			</form>
		}
	}
	if (GlobalVariables.adminNames.Contains(this.User.Identity.Name))
	{
		<h6>The user has: @Model.User.Warnings.Count warnings</h6>
		<form method="post" asp-action="GiveWarning" asp-controller="Admin" asp-route-userid="@Model.User.Id">
		@Html.AntiForgeryToken()
		<input type="text" name="content" placeholder="Reason for warning..."/>
		<button type="submit">Give Warning</button>
		</form>
		<form asp-action="DeleteRepliesAndPosts" asp-route-userid="@Model.User.Id" asp-controller="Admin" method="post">
		@Html.AntiForgeryToken()
		<button type="submit">Delete Posts And Replies of User</button>
		</form>
	}
}
<h1>@Model.User.UserName</h1>
<h5>Posts count: @Model.User.PostsCount</h5>
@{
	foreach(var key in Model.userDate.Keys)
	{
		foreach(var post in Model.Posts)
		{
			if (post.Id == key)
			{
				<a asp-action="PostView" asp-route-id="@post.Id"><h4 style="font-weight:bold">Post: post.Title</h4></a>
				<br />
				break;
			}
		}
		foreach(var reply in Model.Replies)
		{
			if (reply.Id == key)
			{
				<a asp-action="PostView" asp-route-id="@reply.Post.Id" asp-route-isFromProfile="true" asp-route-replyId="@reply.Id"><h5>Reply: @reply.Content</h5></a>
				<br />
				break;
			}
		}
	}
}